@model Werewolf.Models.ViewModel.PlayViewModel;
@{
    ViewData["Title"] = "Play";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-md-3">
        <partial name="_CharacterCardPartial" model="@Model.Character" />
    </div>
    <div class="col-md-9">
        <div class="row">
            <!--  VOTE SECTION  -->
            <div class="container d-flex">
                <div class="h4 text-info">
                    The @Model.Character.Game.TurnType
                </div>
                <div class="ml-auto">
                </div>
            </div>
        </div>

        <div class="row">
            <!--  OPPONENT SECTION  -->
            @foreach (var oppenent in Model.Opponents)
            {
                OpponentCardViewModel OpponentCardVm = new OpponentCardViewModel()
                {
                    Opponent = oppenent,
                    CharacterRole = Model.Character.Role,
                    Note = Model.Notes.FirstOrDefault(c => c.OpponentId == oppenent.ApplicationUserId)
                };

                //var note = Model.Notes.FirstOrDefault(c => c.OpponentId == oppenent.ApplicationUserId);

                //OpponentCardVm.Note = note == null ? "" : note.Message;

                <div class="col-md-6 col-lg-4">
                    <partial name="_OpponentsCardPartial" model="@OpponentCardVm" />
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/note.js" asp-append-version="true"></script>
}